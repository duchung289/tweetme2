{"ast":null,"code":"import _toConsumableArray from\"/Users/administrator/Desktop/Development-Projects/CodeEntrepreneurs/FollowCoding/tweetme2/tweetme2-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/administrator/Desktop/Development-Projects/CodeEntrepreneurs/FollowCoding/tweetme2/tweetme2-web/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{loadTweets,createTweet}from'../lookup';export function TweetsComponent(props){var textAreaRef=React.createRef();var _useState=useState([]),_useState2=_slicedToArray(_useState,2),newTweets=_useState2[0],setNewTweets=_useState2[1];var handleSubmit=function handleSubmit(event){event.preventDefault();var newValue=textAreaRef.current.value;var tempNewTweets=_toConsumableArray(newTweets);// change this to server call\ncreateTweet(newValue,function(response,status){if(status===201){tempNewTweets.unshift(response);}else{console.log(response);alert('There was an error. Please try again');}});setNewTweets(tempNewTweets);textAreaRef.current.value='';};return/*#__PURE__*/React.createElement(\"div\",{className:props.className},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-3\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"textarea\",{ref:textAreaRef,required:true,className:\"form-control\",name:\"tweet\"}),/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary my-3\"},\"Tweet\"))),/*#__PURE__*/React.createElement(TweetList,{newTweets:newTweets}));}export function ActionBtn(props){var tweet=props.tweet,action=props.action;var _useState3=useState(tweet.likes?tweet.likes:0),_useState4=_slicedToArray(_useState3,2),likes=_useState4[0],setLikes=_useState4[1];var _useState5=useState(tweet.likes===true?true:false),_useState6=_slicedToArray(_useState5,2),userLike=_useState6[0],setUserLike=_useState6[1];var className=props.className?props.className:'btn btn-primary btn-sm';var actionDisplay=action.display?action.display:'Action';var handleClick=function handleClick(event){event.preventDefault();if(action.type==='like'){if(userLike===true){// perhaps I unlike it\nsetLikes(likes-1);setUserLike(false);}else{setLikes(likes+1);setUserLike(true);}}};var display=action.type==='like'?\"\".concat(likes,\" \").concat(actionDisplay):actionDisplay;return/*#__PURE__*/React.createElement(\"button\",{className:className,onClick:handleClick},display);}export function Tweet(props){var tweet=props.tweet;var className=props.className?props.className:'col-10 mx-auto col-md-6';return/*#__PURE__*/React.createElement(\"div\",{className:className},/*#__PURE__*/React.createElement(\"p\",null,tweet.id,\" - \",tweet.content),/*#__PURE__*/React.createElement(\"div\",{className:\"btn btn-group\"},/*#__PURE__*/React.createElement(ActionBtn,{tweet:tweet,action:{type:'like',display:'Likes'}}),/*#__PURE__*/React.createElement(ActionBtn,{tweet:tweet,action:{type:'unlike',display:'Unlike'}}),/*#__PURE__*/React.createElement(ActionBtn,{tweet:tweet,action:{type:'retweet',display:'ReTweet'}})));}export function TweetList(props){var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),tweetsInit=_useState8[0],setTweetsInit=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),tweets=_useState10[0],setTweets=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),tweetsDidSet=_useState12[0],setTweetsDidSet=_useState12[1];useEffect(function(){var final=_toConsumableArray(props.newTweets).concat(tweetsInit);if(final.length!==tweets.length){setTweets(final);}},[props.newTweets,tweets,tweetsInit]);useEffect(function(){if(tweetsDidSet===false){var myCallback=function myCallback(response,status){if(status===200){setTweetsInit(response);setTweetsDidSet(true);}else{alert('There was an error!');}};loadTweets(myCallback);}},[tweetsInit,tweetsDidSet,setTweetsDidSet]);return tweets.map(function(item,index){return/*#__PURE__*/React.createElement(Tweet,{tweet:item,className:\"my-5 py-5 border bg-white text-dark\",key:\"\".concat(index,\"-{item.id}\")});});}","map":{"version":3,"sources":["/Users/administrator/Desktop/Development-Projects/CodeEntrepreneurs/FollowCoding/tweetme2/tweetme2-web/src/tweets/components.js"],"names":["React","useEffect","useState","loadTweets","createTweet","TweetsComponent","props","textAreaRef","createRef","newTweets","setNewTweets","handleSubmit","event","preventDefault","newValue","current","value","tempNewTweets","response","status","unshift","console","log","alert","className","ActionBtn","tweet","action","likes","setLikes","userLike","setUserLike","actionDisplay","display","handleClick","type","Tweet","id","content","TweetList","tweetsInit","setTweetsInit","tweets","setTweets","tweetsDidSet","setTweetsDidSet","final","concat","length","myCallback","map","item","index"],"mappings":"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","sourcesContent":["import React, {useEffect, useState}  from 'react'\n\nimport {loadTweets, createTweet} from '../lookup'\n\n\nexport function TweetsComponent(props) {\n    const textAreaRef = React.createRef()\n    const [newTweets, setNewTweets] = useState([])\n    const handleSubmit = (event) => {\n        event.preventDefault()\n        const newValue=textAreaRef.current.value\n        const tempNewTweets = [...newTweets]\n        // change this to server call\n        createTweet(newValue,(response,status) => {\n            if (status ===201) {\n                tempNewTweets.unshift(response)\n            }else {\n                console.log(response)\n                alert('There was an error. Please try again')\n            }\n        })\n        \n        setNewTweets(tempNewTweets)\n        textAreaRef.current.value = ''\n    }\n    return <div className={props.className}>\n        <div className='col-12 mb-3'>\n            <form onSubmit={handleSubmit}>        \n                <textarea ref={textAreaRef} required={true} className='form-control' name = 'tweet'>\n\n                </textarea>\n                <button type='submit' className='btn btn-primary my-3'>Tweet</button>\n            </form>\n        </div>\n        <TweetList newTweets={newTweets}/>\n    </div>\n    \n}\n\nexport function ActionBtn(props) {\n    const {tweet, action} = props\n    const [likes, setLikes] = useState(tweet.likes ? tweet.likes : 0)\n    const [userLike, setUserLike] = useState(tweet.likes ===true ? true : false)\n    const className = props.className ? props.className:'btn btn-primary btn-sm'\n    const actionDisplay = action.display? action.display : 'Action'\n    const handleClick = (event) =>{\n        event.preventDefault()\n        if (action.type === 'like'){\n            if (userLike ===true) {\n                // perhaps I unlike it\n                setLikes(likes -1)\n                setUserLike(false)\n            } else {\n                setLikes(likes + 1)\n                setUserLike(true)\n            }\n        }\n    }\n    const display = action.type === 'like' ? `${likes} ${actionDisplay}` : actionDisplay\n    \n    return <button className={className} onClick={handleClick}>{display}</button>\n}\n  \nexport  function Tweet(props) {\n    const {tweet} = props\n    const className = props.className ? props.className:'col-10 mx-auto col-md-6'\n    return <div className={className}>\n      <p>{tweet.id} - {tweet.content}</p>\n      <div className='btn btn-group'>\n        <ActionBtn tweet={tweet} action={{type:'like', display:'Likes'}}/>\n        <ActionBtn tweet={tweet} action={{type:'unlike', display:'Unlike'}}/>\n        <ActionBtn tweet={tweet} action={{type:'retweet', display:'ReTweet'}}/>\n      </div>\n    </div>\n}\n  \nexport function TweetList(props) {\n    const [tweetsInit, setTweetsInit] = useState([])\n    const [tweets, setTweets] = useState([])\n    const [tweetsDidSet, setTweetsDidSet] = useState(false)\n    useEffect(() => {\n        let final = [...props.newTweets].concat(tweetsInit)\n        if (final.length !== tweets.length){\n            setTweets(final)\n        }\n    },[props.newTweets, tweets, tweetsInit])\n\n    useEffect(() => {\n        if (tweetsDidSet === false) {\n            const myCallback = (response, status) => {\n                if (status ===200) {\n                    setTweetsInit(response)\n                    setTweetsDidSet(true)\n                } else {\n                    alert('There was an error!')\n                }\n            }\n            loadTweets(myCallback)\n        }\n    }, [tweetsInit, tweetsDidSet, setTweetsDidSet])\n    return tweets.map((item, index)=>{\n      return <Tweet tweet={item} className='my-5 py-5 border bg-white text-dark' key={`${index}-{item.id}`}/>\n    })\n}\n"]},"metadata":{},"sourceType":"module"}